<div class="container mt-4" *ngIf="user">
  <h2>Welcome, {{ user.firstName }} {{ user.lastName }}</h2>
  <p><strong>Email:</strong> {{ user.email }}</p>
  <p><strong>Phone:</strong> {{ user.pNumber }}</p>

  <div class="mt-3">
    <button class="btn btn-danger" (click)="deleteAccount()">Delete Account</button>

    <button
      type="button"
      class="btn btn-info ms-2"
      data-bs-toggle="modal"
      data-bs-target="#editUserModal">
      Edit
    </button>
  </div>
</div>

<div
  class="modal fade"
  id="editUserModal"
  tabindex="-1"
  aria-labelledby="editUserModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <form [formGroup]="formEditor" (ngSubmit)="updateDetails()" novalidate>
        <div class="modal-header">
          <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>

        <div class="modal-body">
          <div class="mb-3">
            <label for="fName" class="form-label">First Name</label>
            <input
              type="text"
              id="fName"
              class="form-control"
              formControlName="fName"
            />
            <div
              *ngIf="
                formEditor.controls['fName'].touched &&
                formEditor.controls['fName'].hasError('required')
              "
              class="text-danger"
            >
              This field is required
            </div>
            <div
              *ngIf="formEditor.controls['fName'].hasError('pattern')"
              class="text-danger"
            >
              Only characters are allowed
            </div>
          </div>

          <div class="mb-3">
            <label for="lName" class="form-label">Last Name</label>
            <input
              type="text"
              id="lName"
              class="form-control"
              formControlName="lName"
            />
            <div
              *ngIf="
                formEditor.controls['lName'].touched &&
                formEditor.controls['lName'].hasError('required')
              "
              class="text-danger"
            >
              This field is required
            </div>
            <div
              *ngIf="formEditor.controls['lName'].hasError('pattern')"
              class="text-danger"
            >
              Only characters are allowed
            </div>
          </div>

          <div class="mb-3">
            <label for="pNum" class="form-label">Phone Number</label>
            <input
              type="text"
              id="pNum"
              class="form-control"
              formControlName="pNum"
            />
            <div
              *ngIf="
                formEditor.controls['pNum'].touched &&
                formEditor.controls['pNum'].hasError('required')
              "
              class="text-danger"
            >
              Phone number is required
            </div>
            <div
              *ngIf="formEditor.controls['pNum'].hasError('pattern')"
              class="text-danger"
            >
              Enter a valid 10-digit number
            </div>
          </div>

          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              id="email"
              class="form-control"
              formControlName="email"
            />
            <div
              *ngIf="
                formEditor.controls['email'].touched &&
                formEditor.controls['email'].hasError('required')
              "
              class="text-danger"
            >
              Email is required
            </div>
            <div
              *ngIf="formEditor.controls['email'].hasError('email')"
              class="text-danger"
            >
              Enter a valid email address
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Close
          </button>
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="formEditor.invalid"
            data-bs-dismiss="modal" [disabled]="formEditor.invalid"
          >
            Save changes
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
